<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Decode MacBinary Online - 7bit.org</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrapper">
    <header>
      <h1>Decode MacBinary</h1>
      <p>
        This page allows inspection and downloading of individual components in
        <a href="https://en.wikipedia.org/wiki/MacBinary">MacBinary</a>
        encoded files. All processing is done client-side via Rust compiled to WebAssembly.
      </p>
    </header>

    <main>
      <form>
        <input type="file" name="file" required>
        <input type="submit" name="read" value="Read">
        <p class="help-text">
          Select a MacBinary file and press the Read button to view its details.
          Don't have a MacBinary file handy?
          <a href="https://github.com/wezm/macbinary/raw/main/tests/Text%20File.bin">Here's one you can try</a>.
        </p>
      </form>

      <!-- TODO: Change into template -->
      <div id="details" class="hidden">
        <h2>Details</h2>

        <dl>
          <dt>Filename<dt>
          <dd id="filename"></dd>
          <dt>Created<dt>
          <dd id="created"></dd>
          <dt>Modified<dt>
          <dd id="modified"></dd>
          <dt>Type<dt>
          <dd><code id="type"></code></dd>
          <dt>Creator<dt>
          <dd ><code id="creator"></code></dd>
          <dt>Data Fork<dt>
          <dd>
            Size: <span id="data_fork_len"></span>
            <a href="#" id="download_data_fork"><img src="download-icon.svg" width="16" alt=""> Download</a>
          </dd>
          <dt>Resource Fork<dt>
          <dd>Size: <span id="rsrc_fork_len"></span></dd>
          <dt>Resources</dt>
          <dd id="resources">
            <table>
              <thead>
                <tr>
                  <th>Type</th>
                  <th>ID</th>
                  <th>Size</th>
                  <th>Name</th>
                  <th class="text-centre">Download</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </dd>
        </dl>
      </div>

      <div id="error" class="hidden">
        <h2>Error</h2>

        <p></p>
      </div>

      <template id="resource">
        <tr>
          <td><code></code></td>
          <td></td>
          <td></td>
          <td></td>
          <td class="text-centre"><a href="#"><img src="download-icon.svg" width="18" alt="Download"></a></td>
        </tr>
      </template>
    </main>

    <footer>
      <aside>
        <h2>About</h2>

        <p>I built a <a href="https://github.com/wezm/macbinary">Rust library to parse MacBinary files</a>
          and resource forks and created this
          page as something of testbed. It should be able to read MacBinary I, II, and III files.
          If you encounter a file that can't be read
          <a href="https://github.com/wezm/macbinary/issues">please let me know</a>.
          Download icon by Desainer Kanan from
          <a href="https://thenounproject.com/icon/download-2849790/">Noun Project</a>.
        </p>
      </aside>

      <div class="socials">
        <a href="https://mastodon.decentralised.social/@wezm">Fediverse</a>
        <a href="https://twitter.com/wezm">Twitter</a>
        <a href="https://github.com/wezm/7bit.org/tree/main/public/macbinary">Website Source</a>
        <a href="https://github.com/wezm/macbinary">Library Source</a>
      </div>
      &copy; 2023 <a href="https://www.wezm.net/">Wesley Moore</a>
    </footer>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
